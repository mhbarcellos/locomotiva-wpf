<Window x:Class="TrabalhoC1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Locomotiva WPF" Width="1000" Height="420" Background="#FFEFF3F7">
    <Viewbox x:Name="StageViewbox" Stretch="Uniform" StretchDirection="Both">
        <Canvas x:Name="Stage" Width="1000" Height="420" Background="#ECEFF7">
            <Rectangle Width="1000" Height="420">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#FFECF2F9" Offset="0"/>
                        <GradientStop Color="#FFDDE8F3" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
            <!-- ===== Trilho ===== -->
            <Canvas x:Name="TrackCanvas" Width="1000" Height="80" Canvas.Left="0" Canvas.Top="340"/>
            <!-- Barras do trilho -->
            <Rectangle x:Name="RailTop"    Width="1000" Height="8" Fill="#7A8B96" Canvas.Left="0" Canvas.Top="354"/>
            <Rectangle x:Name="RailBottom" Width="1000" Height="8" Fill="#7A8B96" Canvas.Left="0" Canvas.Top="408"/>

            <!-- ===== Locomotiva ===== -->
            <Canvas x:Name="LocoCanvas" Width="420" Height="220" Canvas.Left="40" Canvas.Top="220">
                <Canvas.Resources>
                    <!-- Template da roda -->
                    <ControlTemplate x:Key="WheelTemplate" TargetType="ContentControl">
                        <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                            <Ellipse Stroke="#222" StrokeThickness="3" Fill="#DDD"/>
                            <Ellipse Margin="6" Stroke="#222" StrokeThickness="2" Fill="#F7F7F7"/>
                            <Canvas>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="0"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="45"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="135"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="180"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="225"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="270"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <Rectangle Width="2" Height="{Binding ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" Fill="#333" RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="315"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                            </Canvas>
                            <Ellipse Width="12" Height="12" Fill="#444" Stroke="#111" StrokeThickness="1"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </ControlTemplate>
                </Canvas.Resources>

                <!-- Corpo -->
                <Rectangle Width="380" Height="80" RadiusX="10" RadiusY="10"
                   Fill="#2F77B3" Stroke="#174A72" StrokeThickness="2"
                   Canvas.Left="20" Canvas.Top="40"/>
                <!-- Cabine -->
                <Rectangle Width="110" Height="90" RadiusX="6" RadiusY="6"
                   Fill="#315E86" Stroke="#173B57" StrokeThickness="2"
                   Canvas.Left="250" Canvas.Top="0"/>
                <!-- Janela -->
                <Rectangle Width="70" Height="45" RadiusX="3" RadiusY="3"
                   Fill="#CFE6FF" Stroke="#66819A" StrokeThickness="2"
                   Canvas.Left="270" Canvas.Top="15"/>
                <!-- Chaminé -->
                <Polygon Points="70,30 90,30 100,10 60,10"
                 Fill="#3B3B3B" Stroke="#202020" StrokeThickness="2"/>
                <Ellipse Width="28" Height="8" Fill="#4A4A4A" Canvas.Left="66" Canvas.Top="8"/>

                <!-- Rodas -->
                <ContentControl x:Name="Wheel1" Template="{StaticResource WheelTemplate}"
                        Width="80" Height="80" Canvas.Left="60" Canvas.Top="100">
                    <ContentControl.RenderTransform>
                        <RotateTransform x:Name="Wheel1Rotate" CenterX="40" CenterY="40"/>
                    </ContentControl.RenderTransform>
                </ContentControl>
                <ContentControl x:Name="Wheel2" Template="{StaticResource WheelTemplate}"
                        Width="80" Height="80" Canvas.Left="220" Canvas.Top="100">
                    <ContentControl.RenderTransform>
                        <RotateTransform x:Name="Wheel2Rotate" CenterX="40" CenterY="40"/>
                    </ContentControl.RenderTransform>
                </ContentControl>

                <!-- Bielas e pinos -->
                <Line x:Name="CrankArm1" Stroke="#222" StrokeThickness="4" StrokeEndLineCap="Round"/>
                <Line x:Name="CrankArm2" Stroke="#222" StrokeThickness="4" StrokeEndLineCap="Round"/>
                <Ellipse x:Name="Pin1" Width="10" Height="10" Fill="#F25F5C" Stroke="#8A1F1D" StrokeThickness="1"/>
                <Ellipse x:Name="Pin2" Width="10" Height="10" Fill="#F25F5C" Stroke="#8A1F1D" StrokeThickness="1"/>
                <Line x:Name="SideRod" Stroke="#333" StrokeThickness="7" StrokeLineJoin="Round" StrokeEndLineCap="Round"/>
            </Canvas>

            <!-- Camada para fumaça -->
            <Canvas x:Name="EffectsLayer" Width="1000" Height="420"/>
        </Canvas>
    </Viewbox>
</Window>
